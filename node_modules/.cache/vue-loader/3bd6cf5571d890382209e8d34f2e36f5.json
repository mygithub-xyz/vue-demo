{"remainingRequest":"D:\\idea-workspace\\demo02\\vue-demo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea-workspace\\demo02\\vue-demo\\src\\views\\Book.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\idea-workspace\\demo02\\vue-demo\\src\\views\\Book.vue","mtime":1599033382137},{"path":"D:\\idea-workspace\\demo02\\vue-demo\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\idea-workspace\\demo02\\vue-demo\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\idea-workspace\\demo02\\vue-demo\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\idea-workspace\\demo02\\vue-demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\idea-workspace\\demo02\\vue-demo\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKYm9keSB7CiAgICBiYWNrZ3JvdW5kOiAjYzVlZWZiOwp9Ci5lbC10YWJsZSAud2FybmluZy1yb3cgewogICAgYmFja2dyb3VuZDogI2M2ZGQ4ODsKfQoKLmVsLXRhYmxlX19ib2R5IHRyOmhvdmVyPnRkewogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZiZWVhZSAhaW1wb3J0YW50Owp9CgouZWwtdGFibGVfX2JvZHkgdHIuY3VycmVudC1yb3c+dGR7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmJiNGNhICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["Book.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwWA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"Book.vue","sourceRoot":"src/views","sourcesContent":["\r\n<template>\r\n    <div class=\"book\" >\r\n            <table style=\"width: 90%\">\r\n                <tr>\r\n                    <th align=\"left\">\r\n                        <el-button type=\"focus\" @click=\"addUser\">新增</el-button>\r\n                        <el-button type=\"info\" @click=\"deleteUsers\">批量删除</el-button>\r\n                        <el-button type=\"hover\" @click=\"loadData\">刷新</el-button>\r\n                        <el-button type=\"info\" @click=\"exports\">导出</el-button>\r\n                    </th>\r\n                    <th align=\"right\">\r\n                        <el-form :inline=\"true\" :model=\"searchPeople\" @keyup.enter.native=\"reloadList()\">\r\n                        <el-form-item>\r\n                            <el-input v-model=\"searchPeople.pname\" placeholder=\"用户名\" clearable></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item>\r\n                            <el-input v-model=\"searchPeople.countryid\" placeholder=\"密码\" clearable></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item>\r\n                            <el-button type=\"info\" @click=\"currentPage=1,reloadList()\">查询</el-button>\r\n                        </el-form-item>\r\n                        </el-form>\r\n                    </th>\r\n                </tr>\r\n            </table>\r\n    <!--    <table style=\"width: 100%\">\r\n            <tr align=\"left\">\r\n                <td width=\"180\">选择</td>\r\n                <td width=\"180\">序号</td>\r\n                <td width=\"180\">名字</td>\r\n                <td width=\"180\">密码</td>\r\n                <td width=\"180\">创建时间</td>\r\n                <td width=\"180\">操作</td>\r\n            </tr>\r\n        <tr v-for=\"(item,index) in peopleList\":key=\"index\" align=\"left\">\r\n            <td >\r\n                <input type=\"checkbox\"  v-model=\"item.checked\"\r\n                                      @click=\"updateSelection(item.pid)\">\r\n            </input>\r\n            </td>\r\n            <td>{{index+1}} </td>\r\n            <td >{{item.pname}} </td>\r\n            <td>{{item.countryid}} </td>\r\n            <td >{{item.createtime}} </td>\r\n            <td >\r\n                <el-button type=\"text\" @click=\"checkDetail(item)\">查看详情</el-button>\r\n\r\n                <el-button type=\"info\" @click=\"modifyUser(item)\">修改</el-button>\r\n\r\n                <el-button type=\"info\" @click=\"deleteUser(item)\">删除</el-button>\r\n            </td>\r\n        </tr>\r\n        </table>-->\r\n      <el-table :data=\"peopleList\" style=\"width: 100%\"  :row-class-name=\"tableRowClassName\">\r\n                <el-table-column label=\"选择\" width=\"50px\" >\r\n                    <input type=\"checkbox\"  slot-scope=\"scope\" v-model=\"scope.row.checked\"\r\n                           @click=\"updateSelection(scope.row.pid)\">\r\n                    </input>\r\n                 </el-table-column>\r\n            <el-table-column label=\"序号\" type=\"index\" align=\"center\" width=\"100px\">\r\n            </el-table-column>\r\n           <!-- <el-table-column prop=\"pid\" label=\"id\" width=\"120\" >\r\n            </el-table-column>-->\r\n            <el-table-column prop=\"pname\" label=\"名字\" align=\"center\" width=\"150px\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"countryid\" label=\"密码\" align=\"center\" width=\"150px\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"createtime\"  align=\"center\" label=\"创建时间\" width=\"180px\">\r\n            </el-table-column>\r\n            &lt;!&ndash;第二步  开始进行修改和查询操作&ndash;&gt;\r\n            <el-table-column label=\"操作\" align=\"center\" min-width=\"150px\">\r\n\r\n                <template slot-scope=\"scope\">\r\n                    <el-button type=\"text\" @click=\"checkDetail(scope.row)\">查看详情</el-button>\r\n\r\n                    <el-button type=\"info\" @click=\"modifyUser(scope.row)\">修改</el-button>\r\n\r\n                    <el-button type=\"info\" @click=\"deleteUser(scope.row)\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <!--编辑与增加的页面-->\r\n        <div align=\"center\">\r\n            <el-pagination\r\n                    @size-change=\"handleSizeChange\"\r\n                    @current-change=\"handleCurrentChange\"\r\n                    :current-page=\"currentPage\"\r\n                    :page-sizes=\"[5, 10, 15, 20]\"\r\n                    :page-size=\"pagesize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"totalCount\">\r\n            </el-pagination>\r\n        </div>\r\n        <!--新增界面-->\r\n        <el-dialog title=\"编辑\" :visible.sync=\"dialogVisible\" width=\"50%\" :close-on-click-modal=\"false\">\r\n            <el-form :model=\"people\" ref=\"people\" label-width=\"0px\" class=\"demo-ruleForm login-container\">\r\n                <el-form-item prop=\"pname\">\r\n                    <el-input type=\"text\" v-model=\"people.pname\" auto-complete=\"off\" placeholder=\"用户名\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"countryid\">\r\n                    <el-input type=\"text\" v-model=\"people.countryid\" auto-complete=\"off\" placeholder=\"密码\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"createtime\">\r\n                    <el-date-picker v-model=\"people.createtime\" auto-complete=\"off\" placeholder=\"选择日期\" format=\"yyyy年MM月dd日 HH时mm分ss秒\" value-format=\"yyyy-MM-dd HH:mm:ss\">\r\n                    </el-date-picker>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click.native=\"dialogVisible = false,people={pid:'',pname:'',countryid:''}\">取 消</el-button>\r\n                <a v-if=\"people.pid==null||people.pid==''\">\r\n                     <el-button v-if=\"isView\" type=\"primary\" @click.native=\"addSubmit\">确 定</el-button>\r\n                </a>\r\n                <a v-else>\r\n                     <el-button v-if=\"isView\" type=\"primary\" @click.native=\"editSubmit\">确 定</el-button>\r\n                </a>\r\n\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"Book.vue\",\r\n        data() {\r\n            return {\r\n                peopleList: [],\r\n                addFormReadOnly: true,\r\n                dialogVisible: false,\r\n                isView: true,\r\n                searchPeople: {\r\n                    pid: '',\r\n                    pname: '',\r\n                    countryid: '',\r\n                    createtime:''},\r\n                people: {\r\n                    pid: '',\r\n                    pname: '',\r\n                    countryid: '',\r\n                    createtime:''\r\n                },\r\n\r\n                //默认每页数据量\r\n                pagesize: 5,\r\n                //默认高亮行数据id\r\n                highlightId: -1,\r\n                //当前页码\r\n                currentPage: 1,\r\n                //查询的页码\r\n                start: 1,\r\n                //默认数据总数\r\n                totalCount: 1000,\r\n                selectIds:[]\r\n            }\r\n        },\r\n        mounted: function () {\r\n            this.loadData();\r\n        },\r\n\r\n        methods: {\r\n            loadData() {\r\n                this.searchPeople={};\r\n                this.reloadList();\r\n            },\r\n            //初始化加载\r\n            reloadList(){\r\n                this.selectIds=[];\r\n                axios.post('http://localhost:8081/people/search?page='+this.currentPage+\"&rows=\"+this.pagesize,this.searchPeople).then((result) => {\r\n                    var _data = result.data.rows;\r\n                    this.peopleList = _data;\r\n                    this.totalCount = result.data.total;\r\n                });\r\n            },\r\n            addUser() {\r\n                this.people = {\r\n                    pid: '',\r\n                    pname: '',\r\n                    countryid: '',\r\n                    createtime:''\r\n                };\r\n                this.isView = true;\r\n                this.dialogVisible = true;\r\n            },\r\n            checkDetail(rowData) {\r\n                this.people = Object.assign({}, rowData);\r\n                this.isView = false;\r\n                this.dialogVisible = true;\r\n\r\n            },\r\n            modifyUser(rowData) {\r\n                this.people = Object.assign({}, rowData);\r\n                this.isView = true;\r\n                this.dialogVisible = true;\r\n            },\r\n            //删除记录\r\n            deleteUser(rowData) {\r\n                if (confirm(\"确定要删除？\")) {\r\n                        axios.delete(\"http://localhost:8081/people/delete?selectIds=\"+rowData.pid).then((result) => {\r\n                            if (result.data) {\r\n                                this.$message({\r\n                                    type: 'info',\r\n                                    message: `已删除`\r\n                                });\r\n                            } else {\r\n                                this.$message({\r\n                                    type: 'info',\r\n                                    message: `删除失败`\r\n                                });\r\n\r\n                            }\r\n                            this.loadData();\r\n                        });\r\n                    }\r\n            },\r\n            //增加一条记录\r\n            addSubmit() {\r\n                        axios.post(\"http://localhost:8081/people/add\", this.people).then((result) => {\r\n                            if (result.data.success) {\r\n                                this.$message({\r\n                                    type: 'info',\r\n                                    message: '添加成功',\r\n                                });\r\n                                this.loadData();\r\n                            } else {\r\n                                this.$message({\r\n                                    type: 'info',\r\n                                    message: '添加失败',\r\n                                });\r\n                            }\r\n                            this.dialogVisible = false;\r\n                        });\r\n                    },\r\n            //修改一条记录\r\n            editSubmit() {\r\n                        axios.put(\"http://localhost:8081/people/edit\", this.people).then((result) => {\r\n                            if (result.data) {\r\n                                this.$message({\r\n                                    type: 'info',\r\n                                    message: '修改成功',\r\n                                });\r\n                                this.loadData();\r\n                            } else {\r\n                                this.$message({\r\n                                    type: 'info',\r\n                                    message: '添加失败',\r\n                                });\r\n                            }\r\n                            this.dialogVisible = false;\r\n                        });\r\n                    },\r\n            //改变当前点击的行的class，高亮当前行\r\n            tableRowClassName({row, rowIndex}) {\r\n                if (row.pname ==\"李白\") {\r\n                    return 'warning-row';\r\n                }\r\n                return '';\r\n            },\r\n\r\n            //每页显示数据量变更\r\n            handleSizeChange: function(val) {\r\n                this.pagesize = val;\r\n                this.reloadList();\r\n            },\r\n\r\n            //页码变更\r\n            handleCurrentChange: function(val) {\r\n                this.currentPage = val;\r\n                this.reloadList();\r\n            },\r\n            //多选选择绑定\r\n            updateSelection(rowData){\r\n                if (event.target.checked){\r\n                    this.selectIds.push(rowData);\r\n                }else {\r\n                    //根据id找到对应的index\r\n                    var index = this.selectIds.indexOf(rowData);\r\n                    //根据index从数组中删除\r\n                    this.selectIds.splice(index, 1);\r\n                }\r\n                console.log(this.selectIds)\r\n            },\r\n\r\n            //全选绑定\r\n            //扩展\r\n            selectAll(){\r\n                if (event.target.checked) { //判断是全选\r\n                    this.selectIds = [];//先清空，防止在操作了一个轮回之后，重复添加了...\r\n                    this.peopleList.forEach(this.peopleList, function (i) {  //list.devices这是循环从后台获取的数组，并添加到刚刚定义的数组里\r\n                        i.checked = true; //全选即将所有的复选框变为选中\r\n                        this.selectIds.push(i.pid);\r\n                    })\r\n                } else {\r\n                    this.peopleList.forEach(this.peopleList, function (i) {\r\n                        i.checked = false; //所有复选框为不选中\r\n                        this.selectIds = [];\r\n                    })\r\n                }\r\n            },\r\n            //批量删除\r\n            exports() {\r\n                if (this.selectIds.length <1) {\r\n                    alert(\"请先选择\");\r\n                } else {\r\n                    if (confirm(\"确定要导出？\")) {\r\n                        axios.get(\"http://localhost:8081/people/export?selectIds=\" + this.selectIds).then((result) => {\r\n\r\n                            if (result.data) {\r\n                                this.$message({\r\n                                    type: 'info',\r\n                                    message: `已导出`\r\n                                });\r\n                                window.location.href=\"http://localhost:8081/people/export?selectIds=\" + this.selectIds;\r\n                            } else {\r\n                                this.$message({\r\n                                    type: 'info',\r\n                                    message: `导出失败`\r\n                                });\r\n\r\n                            }\r\n                            this.loadData();\r\n                        });\r\n                    }else {\r\n                        this.loadData();\r\n                    }\r\n                        }\r\n            },\r\n            //批量导出\r\n            deleteUsers() {\r\n                if (this.selectIds.length <1) {\r\n                    alert(\"请先选择\");\r\n                } else {\r\n                    if (confirm(\"确定要删除？\")) {\r\n                        axios.delete(\"http://localhost:8081/people/delete?selectIds=\" + this.selectIds).then((result) => {\r\n                            if (result.data) {\r\n                                this.$message({\r\n                                    type: 'info',\r\n                                    message: `已删除`\r\n                                });\r\n                            } else {\r\n                                this.$message({\r\n                                    type: 'info',\r\n                                    message: `删除失败`\r\n                                });\r\n\r\n                            }\r\n                            this.loadData();\r\n                        });\r\n                    }else {\r\n                        this.loadData();\r\n                    }\r\n                }\r\n            },\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    body {\r\n        background: #c5eefb;\r\n    }\r\n    .el-table .warning-row {\r\n        background: #c6dd88;\r\n    }\r\n\r\n    .el-table__body tr:hover>td{\r\n        background-color: #fbeeae !important;\r\n    }\r\n\r\n    .el-table__body tr.current-row>td{\r\n        background-color: #fbb4ca !important;\r\n    }\r\n</style>\r\n"]}]}